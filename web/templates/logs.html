<!DOCTYPE html>
<html>
<head>
    <title>Delivery Logs</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>Delivery Logs for Subscription {{.SubscriptionID}}</h1>
    <a href="/ui/subscriptions">Back to Subscriptions</a>

    <h2>Send Test Webhook</h2>
    <form method="POST" action="/ui/subscriptions/{{.SubscriptionID}}/send">
        <label>Payload (JSON):<br>
            <textarea name="payload" rows="4" cols="60">{ "event": "test" }</textarea>
        </label><br>
        <button type="submit">Send Webhook</button>
    </form>

    <h2>Recent Delivery Logs</h2>
    <table border="1" cellpadding="5">
        <tr>
            <th>Task ID</th>
            <th>Status</th>
            <th>Timestamp</th>
            <th>Attempt</th>
            <th>Outcome</th>
            <th>HTTP Status</th>
            <th>Error</th>
        </tr>
        {{range .Logs}}
        <tr>
            <td>{{.DeliveryTaskID}}</td>
            <td>{{.TaskStatus}}</td>
            <td>{{.Timestamp}}</td>
            <td>{{.AttemptNumber}}</td>
            <td>{{.Outcome}}</td>
            <td>{{.HttpStatus.Int64}}</td>
            <td>{{if .ErrorDetails.Valid}}{{.ErrorDetails.String}}{{else}}-{{end}}</td>
        </tr>
        {{end}}
    </table>
</body>
</html>